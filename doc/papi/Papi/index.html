<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Papi (papi.Papi)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../index.html">papi</a> &#x00BB; Papi</nav><h1>Module <code>Papi</code></h1><p>Performance Application Programming Interface (PAPI) bindings.</p><p>This module binds <code>&lt;papi.h&gt;</code>. PAPI provides portable access to hardware performance counters. For more information, see the <a href="http://icl.cs.utk.edu/papi/">homepage</a>.</p><p><b>Note.</b> All functions in this module except <a href="index.html#val-shutdown"><code>shutdown</code></a> raise <a href="index.html#exception-Error"><code>Error</code></a> whenever the underlying PAPI call signals an error.</p><p><b>Note.</b> All functions except <a href="index.html#val-init"><code>init</code></a> and <a href="index.html#val-shutdown"><code>shutdown</code></a> raise <code>Error (ENOINIT, _)</code> before initialisation.</p><p>For examples of use, consult <a href="index.html#examples"><span>examples</span></a>.</p><p><em>v0.1.1 — <a href="https://github.com/pqwy/ocaml-papi">homepage</a></em></p><nav class="toc"><ul><li><a href="#errors">Errors</a></li><li><a href="#initialisation">Initialisation</a></li><li><a href="#events">Events</a></li><li><a href="#event-sets">Event sets</a></li><li><a href="#examples">Examples</a></li></ul></nav></header><section><header><h2 id="errors"><a href="#errors" class="anchor"></a>Errors</h2></header><dl><dt class="spec type" id="type-error"><a href="#type-error" class="anchor"></a><code><span class="keyword">type</span> error</code><code> = </code><table class="variant"><tr id="type-error.EINVAL" class="anchored"><td class="def constructor"><a href="#type-error.EINVAL" class="anchor"></a><code>| </code><code><span class="constructor">EINVAL</span></code></td></tr><tr id="type-error.ENOMEM" class="anchored"><td class="def constructor"><a href="#type-error.ENOMEM" class="anchor"></a><code>| </code><code><span class="constructor">ENOMEM</span></code></td></tr><tr id="type-error.ESYS" class="anchored"><td class="def constructor"><a href="#type-error.ESYS" class="anchor"></a><code>| </code><code><span class="constructor">ESYS</span></code></td></tr><tr id="type-error.ECMP" class="anchored"><td class="def constructor"><a href="#type-error.ECMP" class="anchor"></a><code>| </code><code><span class="constructor">ECMP</span></code></td></tr><tr id="type-error.ECLOST" class="anchored"><td class="def constructor"><a href="#type-error.ECLOST" class="anchor"></a><code>| </code><code><span class="constructor">ECLOST</span></code></td></tr><tr id="type-error.EBUG" class="anchored"><td class="def constructor"><a href="#type-error.EBUG" class="anchor"></a><code>| </code><code><span class="constructor">EBUG</span></code></td></tr><tr id="type-error.ENOEVNT" class="anchored"><td class="def constructor"><a href="#type-error.ENOEVNT" class="anchor"></a><code>| </code><code><span class="constructor">ENOEVNT</span></code></td></tr><tr id="type-error.ECNFLCT" class="anchored"><td class="def constructor"><a href="#type-error.ECNFLCT" class="anchor"></a><code>| </code><code><span class="constructor">ECNFLCT</span></code></td></tr><tr id="type-error.ENOTRUN" class="anchored"><td class="def constructor"><a href="#type-error.ENOTRUN" class="anchor"></a><code>| </code><code><span class="constructor">ENOTRUN</span></code></td></tr><tr id="type-error.EISRUN" class="anchored"><td class="def constructor"><a href="#type-error.EISRUN" class="anchor"></a><code>| </code><code><span class="constructor">EISRUN</span></code></td></tr><tr id="type-error.ENOEVST" class="anchored"><td class="def constructor"><a href="#type-error.ENOEVST" class="anchor"></a><code>| </code><code><span class="constructor">ENOEVST</span></code></td></tr><tr id="type-error.ENOTPRESET" class="anchored"><td class="def constructor"><a href="#type-error.ENOTPRESET" class="anchor"></a><code>| </code><code><span class="constructor">ENOTPRESET</span></code></td></tr><tr id="type-error.ENOCNTR" class="anchored"><td class="def constructor"><a href="#type-error.ENOCNTR" class="anchor"></a><code>| </code><code><span class="constructor">ENOCNTR</span></code></td></tr><tr id="type-error.EMISC" class="anchored"><td class="def constructor"><a href="#type-error.EMISC" class="anchor"></a><code>| </code><code><span class="constructor">EMISC</span></code></td></tr><tr id="type-error.EPERM" class="anchored"><td class="def constructor"><a href="#type-error.EPERM" class="anchor"></a><code>| </code><code><span class="constructor">EPERM</span></code></td></tr><tr id="type-error.ENOINIT" class="anchored"><td class="def constructor"><a href="#type-error.ENOINIT" class="anchor"></a><code>| </code><code><span class="constructor">ENOINIT</span></code></td></tr><tr id="type-error.ENOCMP" class="anchored"><td class="def constructor"><a href="#type-error.ENOCMP" class="anchor"></a><code>| </code><code><span class="constructor">ENOCMP</span></code></td></tr><tr id="type-error.ENOSUPP" class="anchored"><td class="def constructor"><a href="#type-error.ENOSUPP" class="anchor"></a><code>| </code><code><span class="constructor">ENOSUPP</span></code></td></tr><tr id="type-error.ENOIMPL" class="anchored"><td class="def constructor"><a href="#type-error.ENOIMPL" class="anchor"></a><code>| </code><code><span class="constructor">ENOIMPL</span></code></td></tr><tr id="type-error.EBUF" class="anchored"><td class="def constructor"><a href="#type-error.EBUF" class="anchor"></a><code>| </code><code><span class="constructor">EBUF</span></code></td></tr><tr id="type-error.EINVAL_DOM" class="anchored"><td class="def constructor"><a href="#type-error.EINVAL_DOM" class="anchor"></a><code>| </code><code><span class="constructor">EINVAL_DOM</span></code></td></tr><tr id="type-error.EATTR" class="anchored"><td class="def constructor"><a href="#type-error.EATTR" class="anchor"></a><code>| </code><code><span class="constructor">EATTR</span></code></td></tr><tr id="type-error.ECOUNT" class="anchored"><td class="def constructor"><a href="#type-error.ECOUNT" class="anchor"></a><code>| </code><code><span class="constructor">ECOUNT</span></code></td></tr><tr id="type-error.ECOMBO" class="anchored"><td class="def constructor"><a href="#type-error.ECOMBO" class="anchor"></a><code>| </code><code><span class="constructor">ECOMBO</span></code></td><td class="doc"><p>PAPI errors.</p><p>See the header file <code>papi.h</code> for descriptions of errors.</p></td></tr></table></dt></dl><dl><dt class="spec exception" id="exception-Error"><a href="#exception-Error" class="anchor"></a><code><span class="keyword">exception</span> </code><code><span class="exception">Error</span> <span class="keyword">of</span> <a href="index.html#type-error">error</a> * string</code></dt><dd><p>PAPI errors are signalled by raising <code>Error ((err, fname))</code>, where <code>fname</code> is the name of the failing function.</p></dd></dl><dl><dt class="spec value" id="val-pp_error"><a href="#val-pp_error" class="anchor"></a><code><span class="keyword">val</span> pp_error : Stdlib.Format.formatter <span>&#45;&gt;</span> <a href="index.html#type-error">error</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>pp_error ppf err</code> pretty-prints <code>err</code> on <code>ppf</code>.</p></dd></dl><dl><dt class="spec value" id="val-pp_exn_error"><a href="#val-pp_exn_error" class="anchor"></a><code><span class="keyword">val</span> pp_exn_error : Stdlib.Format.formatter <span>&#45;&gt;</span> (<a href="index.html#type-error">error</a> * string) <span>&#45;&gt;</span> unit</code></dt><dd><p><code>pp_exn_error ppf arg</code> pretty-prints the <code>Error</code> argument <code>arg</code> on <code>ppf</code>.</p></dd></dl></section><section><header><h2 id="initialisation"><a href="#initialisation" class="anchor"></a>Initialisation</h2></header><dl><dt class="spec external" id="val-init"><a href="#val-init" class="anchor"></a><code><span class="keyword">val</span> init : unit <span>&#45;&gt;</span> unit</code></dt><dd><p>Initializes PAPI by calling <code>PAPI_library_init</code>. Idempotent: repeated calls are ignored.</p></dd></dl><dl><dt class="spec external" id="val-shutdown"><a href="#val-shutdown" class="anchor"></a><code><span class="keyword">val</span> shutdown : unit <span>&#45;&gt;</span> unit</code></dt><dd><p>Releases PAPI state by calling <code>PAPI_shutdown</code>. Idempotent.</p></dd></dl><dl><dt class="spec external" id="val-hw_counters"><a href="#val-hw_counters" class="anchor"></a><code><span class="keyword">val</span> hw_counters : unit <span>&#45;&gt;</span> int</code></dt><dd><p><code>hw_counters ()</code> is the number of available hardware counters.</p></dd></dl></section><section><header><h2 id="events"><a href="#events" class="anchor"></a>Events</h2></header><dl><dt class="spec type" id="type-event"><a href="#type-event" class="anchor"></a><code><span class="keyword">type</span> event</code><code> = </code><table class="variant"><tr id="type-event.L1_DCM" class="anchored"><td class="def constructor"><a href="#type-event.L1_DCM" class="anchor"></a><code>| </code><code><span class="constructor">L1_DCM</span></code></td></tr><tr id="type-event.L1_ICM" class="anchored"><td class="def constructor"><a href="#type-event.L1_ICM" class="anchor"></a><code>| </code><code><span class="constructor">L1_ICM</span></code></td></tr><tr id="type-event.L2_DCM" class="anchored"><td class="def constructor"><a href="#type-event.L2_DCM" class="anchor"></a><code>| </code><code><span class="constructor">L2_DCM</span></code></td></tr><tr id="type-event.L2_ICM" class="anchored"><td class="def constructor"><a href="#type-event.L2_ICM" class="anchor"></a><code>| </code><code><span class="constructor">L2_ICM</span></code></td></tr><tr id="type-event.L3_DCM" class="anchored"><td class="def constructor"><a href="#type-event.L3_DCM" class="anchor"></a><code>| </code><code><span class="constructor">L3_DCM</span></code></td></tr><tr id="type-event.L3_ICM" class="anchored"><td class="def constructor"><a href="#type-event.L3_ICM" class="anchor"></a><code>| </code><code><span class="constructor">L3_ICM</span></code></td></tr><tr id="type-event.L1_TCM" class="anchored"><td class="def constructor"><a href="#type-event.L1_TCM" class="anchor"></a><code>| </code><code><span class="constructor">L1_TCM</span></code></td></tr><tr id="type-event.L2_TCM" class="anchored"><td class="def constructor"><a href="#type-event.L2_TCM" class="anchor"></a><code>| </code><code><span class="constructor">L2_TCM</span></code></td></tr><tr id="type-event.L3_TCM" class="anchored"><td class="def constructor"><a href="#type-event.L3_TCM" class="anchor"></a><code>| </code><code><span class="constructor">L3_TCM</span></code></td></tr><tr id="type-event.CA_SNP" class="anchored"><td class="def constructor"><a href="#type-event.CA_SNP" class="anchor"></a><code>| </code><code><span class="constructor">CA_SNP</span></code></td></tr><tr id="type-event.CA_SHR" class="anchored"><td class="def constructor"><a href="#type-event.CA_SHR" class="anchor"></a><code>| </code><code><span class="constructor">CA_SHR</span></code></td></tr><tr id="type-event.CA_CLN" class="anchored"><td class="def constructor"><a href="#type-event.CA_CLN" class="anchor"></a><code>| </code><code><span class="constructor">CA_CLN</span></code></td></tr><tr id="type-event.CA_INV" class="anchored"><td class="def constructor"><a href="#type-event.CA_INV" class="anchor"></a><code>| </code><code><span class="constructor">CA_INV</span></code></td></tr><tr id="type-event.CA_ITV" class="anchored"><td class="def constructor"><a href="#type-event.CA_ITV" class="anchor"></a><code>| </code><code><span class="constructor">CA_ITV</span></code></td></tr><tr id="type-event.L3_LDM" class="anchored"><td class="def constructor"><a href="#type-event.L3_LDM" class="anchor"></a><code>| </code><code><span class="constructor">L3_LDM</span></code></td></tr><tr id="type-event.L3_STM" class="anchored"><td class="def constructor"><a href="#type-event.L3_STM" class="anchor"></a><code>| </code><code><span class="constructor">L3_STM</span></code></td></tr><tr id="type-event.BRU_IDL" class="anchored"><td class="def constructor"><a href="#type-event.BRU_IDL" class="anchor"></a><code>| </code><code><span class="constructor">BRU_IDL</span></code></td></tr><tr id="type-event.FXU_IDL" class="anchored"><td class="def constructor"><a href="#type-event.FXU_IDL" class="anchor"></a><code>| </code><code><span class="constructor">FXU_IDL</span></code></td></tr><tr id="type-event.FPU_IDL" class="anchored"><td class="def constructor"><a href="#type-event.FPU_IDL" class="anchor"></a><code>| </code><code><span class="constructor">FPU_IDL</span></code></td></tr><tr id="type-event.LSU_IDL" class="anchored"><td class="def constructor"><a href="#type-event.LSU_IDL" class="anchor"></a><code>| </code><code><span class="constructor">LSU_IDL</span></code></td></tr><tr id="type-event.TLB_DM" class="anchored"><td class="def constructor"><a href="#type-event.TLB_DM" class="anchor"></a><code>| </code><code><span class="constructor">TLB_DM</span></code></td></tr><tr id="type-event.TLB_IM" class="anchored"><td class="def constructor"><a href="#type-event.TLB_IM" class="anchor"></a><code>| </code><code><span class="constructor">TLB_IM</span></code></td></tr><tr id="type-event.TLB_TL" class="anchored"><td class="def constructor"><a href="#type-event.TLB_TL" class="anchor"></a><code>| </code><code><span class="constructor">TLB_TL</span></code></td></tr><tr id="type-event.L1_LDM" class="anchored"><td class="def constructor"><a href="#type-event.L1_LDM" class="anchor"></a><code>| </code><code><span class="constructor">L1_LDM</span></code></td></tr><tr id="type-event.L1_STM" class="anchored"><td class="def constructor"><a href="#type-event.L1_STM" class="anchor"></a><code>| </code><code><span class="constructor">L1_STM</span></code></td></tr><tr id="type-event.L2_LDM" class="anchored"><td class="def constructor"><a href="#type-event.L2_LDM" class="anchor"></a><code>| </code><code><span class="constructor">L2_LDM</span></code></td></tr><tr id="type-event.L2_STM" class="anchored"><td class="def constructor"><a href="#type-event.L2_STM" class="anchor"></a><code>| </code><code><span class="constructor">L2_STM</span></code></td></tr><tr id="type-event.BTAC_M" class="anchored"><td class="def constructor"><a href="#type-event.BTAC_M" class="anchor"></a><code>| </code><code><span class="constructor">BTAC_M</span></code></td></tr><tr id="type-event.PRF_DM" class="anchored"><td class="def constructor"><a href="#type-event.PRF_DM" class="anchor"></a><code>| </code><code><span class="constructor">PRF_DM</span></code></td></tr><tr id="type-event.L3_DCH" class="anchored"><td class="def constructor"><a href="#type-event.L3_DCH" class="anchor"></a><code>| </code><code><span class="constructor">L3_DCH</span></code></td></tr><tr id="type-event.TLB_SD" class="anchored"><td class="def constructor"><a href="#type-event.TLB_SD" class="anchor"></a><code>| </code><code><span class="constructor">TLB_SD</span></code></td></tr><tr id="type-event.CSR_FAL" class="anchored"><td class="def constructor"><a href="#type-event.CSR_FAL" class="anchor"></a><code>| </code><code><span class="constructor">CSR_FAL</span></code></td></tr><tr id="type-event.CSR_SUC" class="anchored"><td class="def constructor"><a href="#type-event.CSR_SUC" class="anchor"></a><code>| </code><code><span class="constructor">CSR_SUC</span></code></td></tr><tr id="type-event.CSR_TOT" class="anchored"><td class="def constructor"><a href="#type-event.CSR_TOT" class="anchor"></a><code>| </code><code><span class="constructor">CSR_TOT</span></code></td></tr><tr id="type-event.MEM_SCY" class="anchored"><td class="def constructor"><a href="#type-event.MEM_SCY" class="anchor"></a><code>| </code><code><span class="constructor">MEM_SCY</span></code></td></tr><tr id="type-event.MEM_RCY" class="anchored"><td class="def constructor"><a href="#type-event.MEM_RCY" class="anchor"></a><code>| </code><code><span class="constructor">MEM_RCY</span></code></td></tr><tr id="type-event.MEM_WCY" class="anchored"><td class="def constructor"><a href="#type-event.MEM_WCY" class="anchor"></a><code>| </code><code><span class="constructor">MEM_WCY</span></code></td></tr><tr id="type-event.STL_ICY" class="anchored"><td class="def constructor"><a href="#type-event.STL_ICY" class="anchor"></a><code>| </code><code><span class="constructor">STL_ICY</span></code></td></tr><tr id="type-event.FUL_ICY" class="anchored"><td class="def constructor"><a href="#type-event.FUL_ICY" class="anchor"></a><code>| </code><code><span class="constructor">FUL_ICY</span></code></td></tr><tr id="type-event.STL_CCY" class="anchored"><td class="def constructor"><a href="#type-event.STL_CCY" class="anchor"></a><code>| </code><code><span class="constructor">STL_CCY</span></code></td></tr><tr id="type-event.FUL_CCY" class="anchored"><td class="def constructor"><a href="#type-event.FUL_CCY" class="anchor"></a><code>| </code><code><span class="constructor">FUL_CCY</span></code></td></tr><tr id="type-event.HW_INT" class="anchored"><td class="def constructor"><a href="#type-event.HW_INT" class="anchor"></a><code>| </code><code><span class="constructor">HW_INT</span></code></td></tr><tr id="type-event.BR_UCN" class="anchored"><td class="def constructor"><a href="#type-event.BR_UCN" class="anchor"></a><code>| </code><code><span class="constructor">BR_UCN</span></code></td></tr><tr id="type-event.BR_CN" class="anchored"><td class="def constructor"><a href="#type-event.BR_CN" class="anchor"></a><code>| </code><code><span class="constructor">BR_CN</span></code></td></tr><tr id="type-event.BR_TKN" class="anchored"><td class="def constructor"><a href="#type-event.BR_TKN" class="anchor"></a><code>| </code><code><span class="constructor">BR_TKN</span></code></td></tr><tr id="type-event.BR_NTK" class="anchored"><td class="def constructor"><a href="#type-event.BR_NTK" class="anchor"></a><code>| </code><code><span class="constructor">BR_NTK</span></code></td></tr><tr id="type-event.BR_MSP" class="anchored"><td class="def constructor"><a href="#type-event.BR_MSP" class="anchor"></a><code>| </code><code><span class="constructor">BR_MSP</span></code></td></tr><tr id="type-event.BR_PRC" class="anchored"><td class="def constructor"><a href="#type-event.BR_PRC" class="anchor"></a><code>| </code><code><span class="constructor">BR_PRC</span></code></td></tr><tr id="type-event.FMA_INS" class="anchored"><td class="def constructor"><a href="#type-event.FMA_INS" class="anchor"></a><code>| </code><code><span class="constructor">FMA_INS</span></code></td></tr><tr id="type-event.TOT_IIS" class="anchored"><td class="def constructor"><a href="#type-event.TOT_IIS" class="anchor"></a><code>| </code><code><span class="constructor">TOT_IIS</span></code></td></tr><tr id="type-event.TOT_INS" class="anchored"><td class="def constructor"><a href="#type-event.TOT_INS" class="anchor"></a><code>| </code><code><span class="constructor">TOT_INS</span></code></td></tr><tr id="type-event.INT_INS" class="anchored"><td class="def constructor"><a href="#type-event.INT_INS" class="anchor"></a><code>| </code><code><span class="constructor">INT_INS</span></code></td></tr><tr id="type-event.FP_INS" class="anchored"><td class="def constructor"><a href="#type-event.FP_INS" class="anchor"></a><code>| </code><code><span class="constructor">FP_INS</span></code></td></tr><tr id="type-event.LD_INS" class="anchored"><td class="def constructor"><a href="#type-event.LD_INS" class="anchor"></a><code>| </code><code><span class="constructor">LD_INS</span></code></td></tr><tr id="type-event.SR_INS" class="anchored"><td class="def constructor"><a href="#type-event.SR_INS" class="anchor"></a><code>| </code><code><span class="constructor">SR_INS</span></code></td></tr><tr id="type-event.BR_INS" class="anchored"><td class="def constructor"><a href="#type-event.BR_INS" class="anchor"></a><code>| </code><code><span class="constructor">BR_INS</span></code></td></tr><tr id="type-event.VEC_INS" class="anchored"><td class="def constructor"><a href="#type-event.VEC_INS" class="anchor"></a><code>| </code><code><span class="constructor">VEC_INS</span></code></td></tr><tr id="type-event.RES_STL" class="anchored"><td class="def constructor"><a href="#type-event.RES_STL" class="anchor"></a><code>| </code><code><span class="constructor">RES_STL</span></code></td></tr><tr id="type-event.FP_STAL" class="anchored"><td class="def constructor"><a href="#type-event.FP_STAL" class="anchor"></a><code>| </code><code><span class="constructor">FP_STAL</span></code></td></tr><tr id="type-event.TOT_CYC" class="anchored"><td class="def constructor"><a href="#type-event.TOT_CYC" class="anchor"></a><code>| </code><code><span class="constructor">TOT_CYC</span></code></td></tr><tr id="type-event.LST_INS" class="anchored"><td class="def constructor"><a href="#type-event.LST_INS" class="anchor"></a><code>| </code><code><span class="constructor">LST_INS</span></code></td></tr><tr id="type-event.SYC_INS" class="anchored"><td class="def constructor"><a href="#type-event.SYC_INS" class="anchor"></a><code>| </code><code><span class="constructor">SYC_INS</span></code></td></tr><tr id="type-event.L1_DCH" class="anchored"><td class="def constructor"><a href="#type-event.L1_DCH" class="anchor"></a><code>| </code><code><span class="constructor">L1_DCH</span></code></td></tr><tr id="type-event.L2_DCH" class="anchored"><td class="def constructor"><a href="#type-event.L2_DCH" class="anchor"></a><code>| </code><code><span class="constructor">L2_DCH</span></code></td></tr><tr id="type-event.L1_DCA" class="anchored"><td class="def constructor"><a href="#type-event.L1_DCA" class="anchor"></a><code>| </code><code><span class="constructor">L1_DCA</span></code></td></tr><tr id="type-event.L2_DCA" class="anchored"><td class="def constructor"><a href="#type-event.L2_DCA" class="anchor"></a><code>| </code><code><span class="constructor">L2_DCA</span></code></td></tr><tr id="type-event.L3_DCA" class="anchored"><td class="def constructor"><a href="#type-event.L3_DCA" class="anchor"></a><code>| </code><code><span class="constructor">L3_DCA</span></code></td></tr><tr id="type-event.L1_DCR" class="anchored"><td class="def constructor"><a href="#type-event.L1_DCR" class="anchor"></a><code>| </code><code><span class="constructor">L1_DCR</span></code></td></tr><tr id="type-event.L2_DCR" class="anchored"><td class="def constructor"><a href="#type-event.L2_DCR" class="anchor"></a><code>| </code><code><span class="constructor">L2_DCR</span></code></td></tr><tr id="type-event.L3_DCR" class="anchored"><td class="def constructor"><a href="#type-event.L3_DCR" class="anchor"></a><code>| </code><code><span class="constructor">L3_DCR</span></code></td></tr><tr id="type-event.L1_DCW" class="anchored"><td class="def constructor"><a href="#type-event.L1_DCW" class="anchor"></a><code>| </code><code><span class="constructor">L1_DCW</span></code></td></tr><tr id="type-event.L2_DCW" class="anchored"><td class="def constructor"><a href="#type-event.L2_DCW" class="anchor"></a><code>| </code><code><span class="constructor">L2_DCW</span></code></td></tr><tr id="type-event.L3_DCW" class="anchored"><td class="def constructor"><a href="#type-event.L3_DCW" class="anchor"></a><code>| </code><code><span class="constructor">L3_DCW</span></code></td></tr><tr id="type-event.L1_ICH" class="anchored"><td class="def constructor"><a href="#type-event.L1_ICH" class="anchor"></a><code>| </code><code><span class="constructor">L1_ICH</span></code></td></tr><tr id="type-event.L2_ICH" class="anchored"><td class="def constructor"><a href="#type-event.L2_ICH" class="anchor"></a><code>| </code><code><span class="constructor">L2_ICH</span></code></td></tr><tr id="type-event.L3_ICH" class="anchored"><td class="def constructor"><a href="#type-event.L3_ICH" class="anchor"></a><code>| </code><code><span class="constructor">L3_ICH</span></code></td></tr><tr id="type-event.L1_ICA" class="anchored"><td class="def constructor"><a href="#type-event.L1_ICA" class="anchor"></a><code>| </code><code><span class="constructor">L1_ICA</span></code></td></tr><tr id="type-event.L2_ICA" class="anchored"><td class="def constructor"><a href="#type-event.L2_ICA" class="anchor"></a><code>| </code><code><span class="constructor">L2_ICA</span></code></td></tr><tr id="type-event.L3_ICA" class="anchored"><td class="def constructor"><a href="#type-event.L3_ICA" class="anchor"></a><code>| </code><code><span class="constructor">L3_ICA</span></code></td></tr><tr id="type-event.L1_ICR" class="anchored"><td class="def constructor"><a href="#type-event.L1_ICR" class="anchor"></a><code>| </code><code><span class="constructor">L1_ICR</span></code></td></tr><tr id="type-event.L2_ICR" class="anchored"><td class="def constructor"><a href="#type-event.L2_ICR" class="anchor"></a><code>| </code><code><span class="constructor">L2_ICR</span></code></td></tr><tr id="type-event.L3_ICR" class="anchored"><td class="def constructor"><a href="#type-event.L3_ICR" class="anchor"></a><code>| </code><code><span class="constructor">L3_ICR</span></code></td></tr><tr id="type-event.L1_ICW" class="anchored"><td class="def constructor"><a href="#type-event.L1_ICW" class="anchor"></a><code>| </code><code><span class="constructor">L1_ICW</span></code></td></tr><tr id="type-event.L2_ICW" class="anchored"><td class="def constructor"><a href="#type-event.L2_ICW" class="anchor"></a><code>| </code><code><span class="constructor">L2_ICW</span></code></td></tr><tr id="type-event.L3_ICW" class="anchored"><td class="def constructor"><a href="#type-event.L3_ICW" class="anchor"></a><code>| </code><code><span class="constructor">L3_ICW</span></code></td></tr><tr id="type-event.L1_TCH" class="anchored"><td class="def constructor"><a href="#type-event.L1_TCH" class="anchor"></a><code>| </code><code><span class="constructor">L1_TCH</span></code></td></tr><tr id="type-event.L2_TCH" class="anchored"><td class="def constructor"><a href="#type-event.L2_TCH" class="anchor"></a><code>| </code><code><span class="constructor">L2_TCH</span></code></td></tr><tr id="type-event.L3_TCH" class="anchored"><td class="def constructor"><a href="#type-event.L3_TCH" class="anchor"></a><code>| </code><code><span class="constructor">L3_TCH</span></code></td></tr><tr id="type-event.L1_TCA" class="anchored"><td class="def constructor"><a href="#type-event.L1_TCA" class="anchor"></a><code>| </code><code><span class="constructor">L1_TCA</span></code></td></tr><tr id="type-event.L2_TCA" class="anchored"><td class="def constructor"><a href="#type-event.L2_TCA" class="anchor"></a><code>| </code><code><span class="constructor">L2_TCA</span></code></td></tr><tr id="type-event.L3_TCA" class="anchored"><td class="def constructor"><a href="#type-event.L3_TCA" class="anchor"></a><code>| </code><code><span class="constructor">L3_TCA</span></code></td></tr><tr id="type-event.L1_TCR" class="anchored"><td class="def constructor"><a href="#type-event.L1_TCR" class="anchor"></a><code>| </code><code><span class="constructor">L1_TCR</span></code></td></tr><tr id="type-event.L2_TCR" class="anchored"><td class="def constructor"><a href="#type-event.L2_TCR" class="anchor"></a><code>| </code><code><span class="constructor">L2_TCR</span></code></td></tr><tr id="type-event.L3_TCR" class="anchored"><td class="def constructor"><a href="#type-event.L3_TCR" class="anchor"></a><code>| </code><code><span class="constructor">L3_TCR</span></code></td></tr><tr id="type-event.L1_TCW" class="anchored"><td class="def constructor"><a href="#type-event.L1_TCW" class="anchor"></a><code>| </code><code><span class="constructor">L1_TCW</span></code></td></tr><tr id="type-event.L2_TCW" class="anchored"><td class="def constructor"><a href="#type-event.L2_TCW" class="anchor"></a><code>| </code><code><span class="constructor">L2_TCW</span></code></td></tr><tr id="type-event.L3_TCW" class="anchored"><td class="def constructor"><a href="#type-event.L3_TCW" class="anchor"></a><code>| </code><code><span class="constructor">L3_TCW</span></code></td></tr><tr id="type-event.FML_INS" class="anchored"><td class="def constructor"><a href="#type-event.FML_INS" class="anchor"></a><code>| </code><code><span class="constructor">FML_INS</span></code></td></tr><tr id="type-event.FAD_INS" class="anchored"><td class="def constructor"><a href="#type-event.FAD_INS" class="anchor"></a><code>| </code><code><span class="constructor">FAD_INS</span></code></td></tr><tr id="type-event.FDV_INS" class="anchored"><td class="def constructor"><a href="#type-event.FDV_INS" class="anchor"></a><code>| </code><code><span class="constructor">FDV_INS</span></code></td></tr><tr id="type-event.FSQ_INS" class="anchored"><td class="def constructor"><a href="#type-event.FSQ_INS" class="anchor"></a><code>| </code><code><span class="constructor">FSQ_INS</span></code></td></tr><tr id="type-event.FNV_INS" class="anchored"><td class="def constructor"><a href="#type-event.FNV_INS" class="anchor"></a><code>| </code><code><span class="constructor">FNV_INS</span></code></td></tr><tr id="type-event.FP_OPS" class="anchored"><td class="def constructor"><a href="#type-event.FP_OPS" class="anchor"></a><code>| </code><code><span class="constructor">FP_OPS</span></code></td></tr><tr id="type-event.SP_OPS" class="anchored"><td class="def constructor"><a href="#type-event.SP_OPS" class="anchor"></a><code>| </code><code><span class="constructor">SP_OPS</span></code></td></tr><tr id="type-event.DP_OPS" class="anchored"><td class="def constructor"><a href="#type-event.DP_OPS" class="anchor"></a><code>| </code><code><span class="constructor">DP_OPS</span></code></td></tr><tr id="type-event.VEC_SP" class="anchored"><td class="def constructor"><a href="#type-event.VEC_SP" class="anchor"></a><code>| </code><code><span class="constructor">VEC_SP</span></code></td></tr><tr id="type-event.VEC_DP" class="anchored"><td class="def constructor"><a href="#type-event.VEC_DP" class="anchor"></a><code>| </code><code><span class="constructor">VEC_DP</span></code></td></tr><tr id="type-event.REF_CYC" class="anchored"><td class="def constructor"><a href="#type-event.REF_CYC" class="anchor"></a><code>| </code><code><span class="constructor">REF_CYC</span></code></td><td class="doc"><p>PAPI <code>PRESET</code> events.</p><p>The header file <code>papiStdEventDefs.h</code>, installed by PAPI, is the authoritative description of events.</p><p>Another way to obtain event descriptions is to call <a href="index.html#val-description"><code>description</code></a>, or pretty-print them with <a href="index.html#val-pp_event"><code>pp_event</code></a>.</p></td></tr></table></dt></dl><dl><dt class="spec external" id="val-name"><a href="#val-name" class="anchor"></a><code><span class="keyword">val</span> name : <a href="index.html#type-event">event</a> <span>&#45;&gt;</span> string</code></dt><dd><p><code>name e</code> is a human-readable name for <code>e</code>.</p><p>It returns <code>PAPI_event_info_t.name</code>, without the prefix <code>&quot;PAPI_&quot;</code>.</p></dd></dl><dl><dt class="spec external" id="val-description"><a href="#val-description" class="anchor"></a><code><span class="keyword">val</span> description : <a href="index.html#type-event">event</a> <span>&#45;&gt;</span> string</code></dt><dd><p><code>description e</code> is a human-readable description of <code>e</code>.</p><p>It returns <code>PAPI_event_info_t.long_descr</code>.</p></dd></dl><dl><dt class="spec external" id="val-query"><a href="#val-query" class="anchor"></a><code><span class="keyword">val</span> query : <a href="index.html#type-event">event</a> <span>&#45;&gt;</span> bool</code></dt><dd><p><code>query e</code> is <code>true</code> iff the hardware supports the event <code>e</code>.</p></dd></dl><dl><dt class="spec value" id="val-pp_event"><a href="#val-pp_event" class="anchor"></a><code><span class="keyword">val</span> pp_event : Stdlib.Format.formatter <span>&#45;&gt;</span> <a href="index.html#type-event">event</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>pp_event ppf e</code> pretty-prints a human-readable description on <code>e</code> on <code>ppf</code>.</p></dd></dl><dl><dt class="spec value" id="val-events"><a href="#val-events" class="anchor"></a><code><span class="keyword">val</span> events : <a href="index.html#type-event">event</a> array</code></dt><dd><p><code>events</code> contains all defined <a href="index.html#type-event"><span>events</span></a>.</p></dd></dl></section><section><header><h2 id="event-sets"><a href="#event-sets" class="anchor"></a>Event sets</h2></header><dl><dt class="spec type" id="type-eventset"><a href="#type-eventset" class="anchor"></a><code><span class="keyword">type</span> eventset</code></dt><dd><p>Sets of events.</p><p><b>Note.</b> Eventsets are handles to resources held by PAPI. The handles are recycled. Calls to <a href="index.html#val-destroy"><code>destroy</code></a> followed by <a href="index.html#val-create"><code>create</code></a> can therefore return handles identical to previously destroyed handles, making destroyed eventsets <em>live</em> again.</p></dd></dl><dl><dt class="spec external" id="val-create"><a href="#val-create" class="anchor"></a><code><span class="keyword">val</span> create : unit <span>&#45;&gt;</span> <a href="index.html#type-eventset">eventset</a></code></dt><dd><p><code>create ()</code> is a new <a href="index.html#type-eventset"><code>eventset</code></a> <code>es</code>.</p><p>Calls <code>PAPI_create_eventset</code>.</p></dd></dl><dl><dt class="spec external" id="val-cleanup"><a href="#val-cleanup" class="anchor"></a><code><span class="keyword">val</span> cleanup : <a href="index.html#type-eventset">eventset</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>cleanup es</code> removes counters from <code>es</code>.</p><p>Calls <code>PAPI_cleanup_eventset</code>.</p></dd></dl><dl><dt class="spec external" id="val-destroy"><a href="#val-destroy" class="anchor"></a><code><span class="keyword">val</span> destroy : <a href="index.html#type-eventset">eventset</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>destroy es</code> releases the resources backing <code>es</code>.</p><p>Calls <code>PAPI_destroy_eventset</code>.</p></dd></dl><dl><dt class="spec external" id="val-add"><a href="#val-add" class="anchor"></a><code><span class="keyword">val</span> add : <a href="index.html#type-eventset">eventset</a> <span>&#45;&gt;</span> <a href="index.html#type-event">event</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>add es e</code> adds the event <code>e</code> to <code>es</code>.</p><p>Calls <code>PAPI_add_event</code>.</p></dd></dl><dl><dt class="spec external" id="val-num_events"><a href="#val-num_events" class="anchor"></a><code><span class="keyword">val</span> num_events : <a href="index.html#type-eventset">eventset</a> <span>&#45;&gt;</span> int</code></dt><dd><p><code>num_events es</code> is the number of <a href="index.html#type-event"><span>events</span></a> currently attached to <code>es</code>.</p></dd></dl><dl><dt class="spec external" id="val-start"><a href="#val-start" class="anchor"></a><code><span class="keyword">val</span> start : <a href="index.html#type-eventset">eventset</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>start es</code> starts counting the events in <code>es</code>.</p><p>Calls <code>PAPI_start</code>.</p></dd></dl><dl><dt class="spec external" id="val-stop"><a href="#val-stop" class="anchor"></a><code><span class="keyword">val</span> stop : <a href="index.html#type-eventset">eventset</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>stop es</code> stops counting the events in <code>es</code>.</p><p>Calls <code>PAPI_stop</code>.</p></dd></dl><dl><dt class="spec external" id="val-reset"><a href="#val-reset" class="anchor"></a><code><span class="keyword">val</span> reset : <a href="index.html#type-eventset">eventset</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>reset es</code> resets the counters of events in <code>es</code>.</p><p>Calls <code>PAPI_reset</code>.</p></dd></dl><dl><dt class="spec external" id="val-read"><a href="#val-read" class="anchor"></a><code><span class="keyword">val</span> read : <a href="index.html#type-eventset">eventset</a> <span>&#45;&gt;</span> ?&#8288;off:int <span>&#45;&gt;</span> float array <span>&#45;&gt;</span> unit</code></dt><dd><p><code>read es ~off values</code> <code>es</code>' event counters to <code>values</code>.</p><p>These values are written to <code>values.(off), ..., values.(off + n - 1)</code> where <code>n</code> is <code>num_events es</code>. <code>off</code> defaults to <code>0</code>.</p><p>Calls <code>PAPI_read</code>.</p></dd></dl><dl><dt class="spec external" id="val-accum"><a href="#val-accum" class="anchor"></a><code><span class="keyword">val</span> accum : <a href="index.html#type-eventset">eventset</a> <span>&#45;&gt;</span> ?&#8288;off:int <span>&#45;&gt;</span> float array <span>&#45;&gt;</span> unit</code></dt><dd><p><code>accum es ~off values</code> adds <code>es</code>' event counters to <code>values</code> and resets them.</p><p>These values are written to <code>values.(off), ..., values.(off + n - 1)</code> where <code>n</code> is <code>num_events es</code>. <code>off</code> defaults to <code>0</code>.</p><p>Calls <code>PAPI_accum</code>.</p></dd></dl></section><section><header><h2 id="examples"><a href="#examples" class="anchor"></a>Examples</h2><p>Read the TSC and the actual number of cycles:</p><pre><code class="ml">open Papi

let _ = init ()
let _ =
  let es = create ()
  and vs = Array.create_float 2 in
  List.iter (add es) [REF_CYC; TOT_CYC];
  start es;
  long_running_fun ();
  read es vs;
  stop es; cleanup es; destroy es;
  Fmt.pr &quot;reference: %f, total: %f\n&quot; vs.(0) vs.(1)</code></pre><p>Create bracket that reads a set of events:</p><pre><code class="ml">open Papi

let _ = init ()
let count_events ~events f =
  let es = create ()
  and vs = Array.create_float (List.length events) in
  List.iter (add es) events;
  start es;
  let res = f () in
  read es vs;
  stop es; cleanup es; destroy es;
  (res, vs)</code></pre></header></section></div></body></html>